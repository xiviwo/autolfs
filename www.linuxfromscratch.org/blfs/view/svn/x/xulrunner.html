<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "application/xhtml+xml; charset=iso-8859-1" />
    <title>
      Xulrunner-20.0.1
    </title>
    <link rel="stylesheet" href="../stylesheets/lfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-2013-05-08">
    <div class="navheader">
      <h4>
        Beyond Linux<sup>®</sup> From Scratch - Version 2013-05-08
      </h4>
      <h3>
        Chapter&nbsp;25.&nbsp;X Libraries
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="webkitgtk.html" title=
          "WebKitGTK+-1.10.2">Prev</a>
          <p>
            WebKitGTK+-1.10.2
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="wm.html" title="Window Managers">Next</a>
          <p>
            Window Managers
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="lib.html" title=
          "Chapter&nbsp;25.&nbsp;X Libraries">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 2013-05-08">Home</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="en" xml:lang="en">
      <h1 class="sect1">
        <a id="xulrunner" name="xulrunner"></a>Xulrunner-20.0.1
      </h1>
      <div class="package" lang="en" xml:lang="en">
        <h2 class="sect2">
          Introduction to Xulrunner
        </h2>
        <p>
          <span class="application">Xulrunner</span> is a runtime environment
          for XUL applications, and forms the major part of the <span class=
          "application">Mozilla</span> codebase. In particular, it provides
          the Gecko engine together with pkgconfig files so that other
          applications can find and use it.
        </p>
        <p>
          This package is known to build and work properly using an LFS-7.2
          platform.
        </p>
        <h3>
          Package Information
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li>
              <p>
                Download (HTTP): <a class="ulink" href=
                "http://releases.mozilla.org/pub/mozilla.org/firefox/releases/20.0.1/source/firefox-20.0.1.source.tar.bz2">
                http://releases.mozilla.org/pub/mozilla.org/firefox/releases/20.0.1/source/firefox-20.0.1.source.tar.bz2</a>
              </p>
            </li>
            <li>
              <p>
                Download (FTP): <a class="ulink" href=
                "ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/20.0.1/source/firefox-20.0.1.source.tar.bz2">
                ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/20.0.1/source/firefox-20.0.1.source.tar.bz2</a>
              </p>
            </li>
            <li>
              <p>
                Download MD5 sum: b822ff4b2348410587dec563235d9320
              </p>
            </li>
            <li>
              <p>
                Download size: 96 MB
              </p>
            </li>
            <li>
              <p>
                Estimated disk space required: 3.9 GB (121 MB installed)
              </p>
            </li>
            <li>
              <p>
                Estimated build time: 29 SBU
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Xulrunner Dependencies
        </h3>
        <h4>
          Required
        </h4>
        <p class="required">
          <a class="xref" href="../multimedia/alsa-lib.html" title=
          "alsa-lib-1.0.27">alsa-lib-1.0.27</a>, <a class="xref" href=
          "gtk2.html" title="GTK+-2.24.17">GTK+-2.24.17</a>, <a class="xref"
          href="../general/zip.html" title="Zip-3.0">Zip-3.0</a> and
          <a class="xref" href="../general/unzip.html" title=
          "UnZip-6.0">UnZip-6.0</a>
        </p>
        <h4>
          Recommended
        </h4>
        <p class="recommended">
          <a class="xref" href="../basicnet/libevent.html" title=
          "libevent-2.0.21">libevent-2.0.21</a>, <a class="xref" href=
          "../multimedia/libvpx.html" title="libvpx-v1.1.0">libvpx-1.1.0</a>,
          <a class="xref" href="../general/nspr.html" title=
          "NSPR-4.9.6">NSPR-4.9.6</a>, <a class="xref" href=
          "../postlfs/nss.html" title="NSS-3.14.3">NSS-3.14.3</a>, <a class=
          "xref" href="../server/sqlite.html" title=
          "SQLite-3.7.16.2">SQLite-3.7.16.2</a> and <a class="xref" href=
          "../general/yasm.html" title="yasm-1.2.0">yasm-1.2.0</a>
        </p>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            If you don't install recommended dependencies, then internal
            copies of those packages will be used. They might be tested to
            work, but they can be out of date or contain security holes.
          </p>
        </div>
        <h4>
          Optional
        </h4>
        <p class="optional">
          <a class="xref" href="../general/dbus-bindings.html#dbus-glib"
          title="D-Bus GLib Bindings">D-Bus GLib Bindings-0.100.2</a>,
          <a class="xref" href="../general/doxygen.html" title=
          "Doxygen-1.8.3.1">Doxygen-1.8.3.1</a>, <a class="xref" href=
          "../gnome/gnome-vfs.html" title=
          "gnome-vfs-2.24.4">gnome-vfs-2.24.4</a> and <a class="xref" href=
          "../gnome/libgnomeui.html" title=
          "libgnomeui-2.24.5">libgnomeui-2.24.5</a> (for integration with the
          old version of <span class="application">GNOME</span>), <a class=
          "ulink" href="http://hunspell.sourceforge.net/">Hunspell</a>,
          <a class="xref" href="libnotify.html" title=
          "libnotify-0.7.5">libnotify-0.7.5</a>, <a class="xref" href=
          "startup-notification.html" title=
          "startup-notification-0.12">startup-notification-0.12</a>,
          <a class="xref" href="../basicnet/wget.html" title=
          "Wget-1.14">Wget-1.14</a> and <a class="xref" href=
          "../basicnet/wireless_tools.html" title=
          "Wireless Tools-29">Wireless Tools-29</a>
        </p>
        <p class="usernotes">
          User Notes: <a class="ulink" href=
          "http://wiki.linuxfromscratch.org/blfs/wiki/xulrunner">http://wiki.linuxfromscratch.org/blfs/wiki/xulrunner</a>
        </p>
      </div>
      <div class="installation" lang="en" xml:lang="en">
        <h2 class="sect2">
          Installation of Xulrunner
        </h2>
        <p>
          The configuration of <span class="application">Xulrunner</span> is
          accomplished by creating a <code class="filename">mozconfig</code>
          file containing the desired configuration options. A default
          <code class="filename">mozconfig</code> is created below. To see
          the entire list of available configuration options (and an
          abbreviated description of each one), issue <span class=
          "command"><strong>./configure --help</strong></span>. You should
          review the entire file and comment or uncomment options as
          necessary.
        </p>
        <pre class="userinput">
<kbd class="command">cat &gt; mozconfig &lt;&lt; "EOF"
# If you have a multicore machine you can speed up the build by running
# several jobs at once by uncommenting the following line and setting the
# value to number of CPU cores:
#mk_add_options MOZ_MAKE_FLAGS="-j4"

# If you have installed DBus-Glib comment out this line:
ac_add_options --disable-dbus

# If you have installed wireless-tools comment out this line:
ac_add_options --disable-necko-wifi

# If you have installed libnotify comment out this line:
ac_add_options --disable-libnotify

# Uncomment these lines if you have installed optional dependencies:
#ac_add_options --enable-system-hunspell
#ac_add_options --enable-startup-notification

# If you have not installed Yasm then uncomment this line:
#ac_add_options --disable-webm

# Comment out following options if you have not installed
# recommended dependencies:
ac_add_options --enable-system-sqlite
ac_add_options --with-system-libevent
ac_add_options --with-system-libvpx
ac_add_options --with-system-nspr
ac_add_options --with-system-nss

# It is recommended not to touch anything below this line
ac_add_options --prefix=/usr
ac_add_options --enable-application=xulrunner

ac_add_options --disable-crashreporter
ac_add_options --disable-installer
ac_add_options --disable-updater
ac_add_options --disable-debug
ac_add_options --disable-tests
ac_add_options --disable-mochitest

ac_add_options --enable-optimize
ac_add_options --enable-strip
ac_add_options --enable-install-strip

ac_add_options --enable-system-ffi
ac_add_options --enable-system-pixman

ac_add_options --enable-shared-js
ac_add_options --with-pthreads

ac_add_options --with-system-bz2
ac_add_options --with-system-jpeg
ac_add_options --with-system-png
ac_add_options --with-system-zlib

mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/xulrunner-build-dir
EOF</kbd>
</pre>
        <p>
          Install <span class="application">Xulrunner</span> by issuing the
          following commands:
        </p>
        <pre class="userinput">
<kbd class="command">make -f client.mk</kbd>
</pre>
        <p>
          This package does not come with a test suite.
        </p>
        <p>
          Now, as the <code class="systemitem">root</code> user:
        </p>
        <pre class="root">
<kbd class="command">make -C xulrunner-build-dir install &amp;&amp;

mkdir -pv /usr/lib/mozilla/plugins &amp;&amp;
rm -rf /usr/lib/xulrunner-20.0.1/plugins &amp;&amp;
ln -sv ../mozilla/plugins /usr/lib/xulrunner-20.0.1 &amp;&amp;

chmod -v 755 /usr/lib/xulrunner-20.0.1/libxpcom.so \
             /usr/lib/xulrunner-devel-20.0.1/sdk/bin/xpcshell &amp;&amp;

for library in libmozalloc.so libmozjs.so libxpcom.so libxul.so; do
    ln -sfv ../../../xulrunner-20.0.1/$library \
            /usr/lib/xulrunner-devel-20.0.1/sdk/lib/$library
    ln -sfv xulrunner-20.0.1/$library /usr/lib/$library
done

ln -sfv ../xulrunner-devel-20.0.1/sdk/bin/run-mozilla.sh \
        /usr/lib/xulrunner-20.0.1
ln -sfv ../xulrunner-devel-20.0.1/sdk/bin/xpcshell \
        /usr/lib/xulrunner-20.0.1</kbd>
</pre>
      </div>
      <div class="commands" lang="en" xml:lang="en">
        <h2 class="sect2">
          Command Explanations
        </h2>
        <p>
          <span class="command"><strong>make -f client.mk
          ...</strong></span>: Mozilla products are packaged to allow the use
          of a configuration file which can be used to pass the configuration
          settings to the <span class=
          "command"><strong>configure</strong></span> command. <span class=
          "command"><strong>make</strong></span> uses the <code class=
          "filename">client.mk</code> file to get initial configuration and
          setup parameters.
        </p>
        <p>
          <span class="command"><strong>ln -sfv ../mozilla/plugins
          ...</strong></span>: Some packages will install browser plugins
          into <code class="filename">/usr/lib/mozilla/plugins</code>.
          Creating this symlink <span class="application">Xulrunner</span>
          keeps additional plugins in a common directory.
        </p>
        <p>
          <span class="command"><strong>for library in libmozalloc.so
          libmozjs.so libxpcom.so libxul.so ...</strong></span> : The
          libraries shipped with this package are installed into <code class=
          "filename">/usr/lib/xulrunner-20.0.1</code> which means they will
          not be found at runtime. These commands make relative symbolic
          links to the shared libraries from <code class=
          "filename">/usr/lib</code>. They will also replace duplicate
          libraries that are installed in <code class=
          "filename">/usr/lib/xulrunner-devel-20.0.1/sdk/lib</code> with
          symlinks in order to save some space.
        </p>
        <p>
          <span class="command"><strong>ln -sfv
          ../xulrunner-devel-20.0.1/sdk/bin/ ...</strong></span> The
          <code class="filename">run-mozilla.sh</code> and <code class=
          "filename">xpcshell</code> files have been moved in this version,
          but the code which installs <span class=
          "application">Firefox</span> (when linked to xulrunner) was not
          updated. These symlinks allow<span class=
          "application">Firefox</span> to install when built against
          <span class="application">Xulrunner</span>.
        </p>
      </div>
      <div class="content" lang="en" xml:lang="en">
        <h2 class="sect2">
          Contents
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Installed Programs:</strong>
              <span class="segbody">xulrunner</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Libraries:</strong>
              <span class="segbody">Numerous libraries, browser components,
              plugins, extensions, and helper modules installed in
              <code class="filename">/usr/lib/xulrunner-20.0.1</code></span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Directories:</strong>
              <span class="segbody">/usr/include/xulrunner-20.0.1,
              /usr/lib/xulrunner-20.0.1, /usr/lib/xulrunner-devel-20.0.1 and
              /usr/share/idl/xulrunner-20.0.1</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Short Descriptions
          </h3>
          <table border="0">
            <col align="left" valign="top" />
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="xulrunner-prog" name=
                    "xulrunner-prog"></a><span class="term"><span class=
                    "command"><strong>xulrunner</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is a shell script used for identifying the installed
                    version and running <span class=
                    "application">Xulrunner</span> applications.
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on 2013-04-14 12:48:41 +0000
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="webkitgtk.html" title=
          "WebKitGTK+-1.10.2">Prev</a>
          <p>
            WebKitGTK+-1.10.2
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="wm.html" title="Window Managers">Next</a>
          <p>
            Window Managers
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="lib.html" title=
          "Chapter&nbsp;25.&nbsp;X Libraries">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 2013-05-08">Home</a>
        </li>
      </ul>
    </div>
  </body>
</html>
