<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "application/xhtml+xml; charset=iso-8859-1" />
    <title>
      Udev Extras (from systemd)
    </title>
    <link rel="stylesheet" href="../stylesheets/lfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-2014-04-20">
    <div class="navheader">
      <h4>
        Beyond Linux<sup>®</sup> From Scratch - Version 2014-04-20
      </h4>
      <h3>
        Chapter&nbsp;12.&nbsp;System Utilities
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="sysstat.html" title=
          "Sysstat-10.2.1">Prev</a>
          <p>
            Sysstat-10.2.1
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="udisks.html" title="UDisks-1.0.5">Next</a>
          <p>
            UDisks-1.0.5
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="sysutils.html" title=
          "Chapter&nbsp;12.&nbsp;System Utilities">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 2014-04-20">Home</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="en" xml:lang="en">
      <h1 class="sect1">
        <a id="udev-extras" name="udev-extras"></a>Udev Extras (from systemd)
      </h1>
      <div class="package" lang="en" xml:lang="en">
        <h2 class="sect2">
          Introduction to Udev Extras
        </h2>
        <p>
          In 2012, the <span class="application">Udev</span> code
          distribution was merged with <span class=
          "application">systemd</span>. <span class=
          "application">Systemd</span> is a set of programs that replace the
          <span class="application">SysVInit</span> package used by LFS and
          is much more complex. It is not compatible with the LFS bootscripts
          and has many problems and few advantages for most LFS users.
        </p>
        <p>
          The procedures below extract libraries and programs from the
          systemd sources that could not be built in LFS due to library
          dependency issues.
        </p>
        <p>
          Unlike any other package in the BLFS book, there is no set version
          of <span class="application">systemd</span> specified to download.
          Several version updates to LFS and BLFS means there are probably
          many different versions of <span class="application">Udev</span> on
          the platforms that BLFS is being built upon. Therefore, you should
          download and use the version of <span class=
          "application">systemd</span> your computer currently uses. The BLFS
          team has no experience updating (or reverting to an older version)
          the <span class="application">Udev</span> programs
          &ldquo;<span class="quote">on the fly.</span>&rdquo; To discover
          the version of <span class="application">Udev</span> your computer
          currently uses, issue <span class="command"><strong>/sbin/udevadm
          --version</strong></span>.
        </p>
        <p>
          This package is known to build and work properly using an LFS-7.5
          platform.
        </p>
        <h3>
          Package Information
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li>
              <p>
                Download (HTTP): <a class="ulink" href=
                "http://www.freedesktop.org/wiki/Software/systemd/">http://www.freedesktop.org/wiki/Software/systemd/</a>
              </p>
            </li>
            <li>
              <p>
                Download size: ~1.3 MB
              </p>
            </li>
            <li>
              <p>
                Estimated disk space required: ~16 MB
              </p>
            </li>
            <li>
              <p>
                Estimated build time: ~0.1 SBU
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Udev Extras Dependencies
        </h3>
        <h4>
          Required
        </h4>
        <p class="required">
          <a class="ulink" href=
          "http://anduin.linuxfromscratch.org/sources/other/">http://anduin.linuxfromscratch.org/sources/other/</a>
          (match the udev-lfs-???.tar.bz2 tarball version to the systemd
          version used in LFS). <a class="xref" href="glib2.html" title=
          "GLib-2.40.0">GLib-2.40.0</a> (for the gudev library), <a class=
          "xref" href="gperf.html" title="Gperf-3.0.4">Gperf-3.0.4</a> (for
          keymap), and <a class="xref" href="gobject-introspection.html"
          title=
          "gobject-introspection-1.40.0">gobject-introspection-1.40.0</a>
          (for gir-data, needed for Gnome)
        </p>
        <h4>
          Optional
        </h4>
        <p class="optional">
          <a class="xref" href="../postlfs/acl.html" title=
          "acl-2.2.52">acl-2.2.52</a>
        </p>
        <h4>
          Optional Runtime Dependencies
        </h4>
        <p class="optional">
          <a class="xref" href="pciutils.html" title=
          "pciutils-3.2.1">pciutils-3.2.1</a> and <a class="xref" href=
          "usbutils.html" title="usbutils-007">usbutils-007</a>
        </p>
        <p class="usernotes">
          User Notes: <a class="ulink" href=
          "http://wiki.linuxfromscratch.org/blfs/wiki/udev-extras">http://wiki.linuxfromscratch.org/blfs/wiki/udev-extras</a>
        </p>
      </div>
      <div class="installation" lang="en" xml:lang="en">
        <h2 class="sect2">
          Installation of Udev Extras
        </h2>
        <p>
          First, put the custom LFS files in place:
        </p>
        <pre class="userinput">
<kbd class="command">UDEV=&lt;version&gt;
tar -xf ../udev-lfs-$UDEV.tar.bz2</kbd>
</pre>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            For udev-lfs-197-2.tar.bz2, there is a minor error in the
            Makefile. For that version, run:
          </p>
          <pre class="userinput">
<kbd class=
"command">sed -i -e '/samsung-9/d' udev-lfs-197-2/makefile-incl.keymap</kbd>
</pre>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <h3 class="sect3">
            keymap
          </h3>
          <div class="admon note">
            <img alt="[Note]" src="../images/note.png" />
            <h3>
              Note
            </h3>
            <p>
              Starting with systemd-206, the keymap capabilities are built
              into the udev procedures initial installation in LFS. These
              procedures only apply to udev versions before 206.
            </p>
          </div>
          <p>
            Support for special keys for many laptops is provided by the
            <span class="command"><strong>keymap</strong></span> program and
            supporting files. If the <span class=
            "command"><strong>keymap</strong></span> capability is desired,
            use:
          </p>
          <pre class="userinput">
<kbd class="command">make -f udev-lfs-$UDEV/Makefile.lfs keymap</kbd>
</pre>
          <p>
            To install <span class="command"><strong>keymap</strong></span>
            and its associated files, issue the following command as the
            <code class="systemitem">root</code> user:
          </p>
          <pre class="root">
<kbd class="command">make -f udev-lfs-$UDEV/Makefile.lfs install-keymap</kbd>
</pre>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <h3 class="sect3">
            gudev
          </h3>
          <p>
            To build the <span class="application">libgudev-1.0</span>
            library and interface files, run:
          </p>
          <pre class="userinput">
<kbd class="command">make -f udev-lfs-$UDEV/Makefile.lfs gudev</kbd>
</pre>
          <p>
            Install the <code class="filename">gudev</code> library, run, as
            the <code class="systemitem">root</code> user:
          </p>
          <pre class="root">
<kbd class="command">make -f udev-lfs-$UDEV/Makefile.lfs install-gudev</kbd>
</pre>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <h3 class="sect3">
            GObject Files
          </h3>
          <p>
            To build the <span class=
            "application">gobject-introspection</span> interface (gir) files
            for the <code class="filename">libgudev-1.0</code> library, run:
          </p>
          <pre class="userinput">
<kbd class="command">make -f udev-lfs-$UDEV/Makefile.lfs gir-data</kbd>
</pre>
          <p>
            Install the gir data, as the <code class="systemitem">root</code>
            user:
          </p>
          <pre class="root">
<kbd class=
"command">make -f udev-lfs-$UDEV/Makefile.lfs install-gir-data</kbd>
</pre>
          <div class="admon caution">
            <img alt="[Caution]" src="../images/caution.png" />
            <h3>
              Caution
            </h3>
            <p>
              There is a shortcut to build and install all of the
              <span class="application">udev</span> components at once using
              the <span class="emphasis"><em>all</em></span> and <span class=
              "emphasis"><em>install-all</em></span> <code class=
              "filename">Makefile.lfs</code> targets. The installation of
              this target will overwrite the base LFS udev files and has not
              been thoroughly tested at the time of this writing. If using
              this procedure, the udev daemon should be stopped before
              overwriting the existing <code class="filename">udevd</code>
              and udev libraries.
            </p>
          </div>
        </div>
      </div>
      <div class="content" lang="en" xml:lang="en">
        <h2 class="sect2">
          Contents
        </h2>
        <p>
          A list of the installed files, along with their short descriptions
          can be found at <a class="ulink" href=
          "http://www.linuxfromscratch.org/lfs/view/development/chapter06/udev.html#contents-udev">
          ../../../../lfs/view/development/chapter06/udev.html#contents-udev</a>.
        </p>
        <p>
          The following is some additional content information.
        </p>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Installed Programs:</strong>
              <span class="segbody">findkeyboards, keyboard-force-release.sh,
              and keymap</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Library:</strong>
              <span class="segbody">libgudev-1.0.so</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Directories:</strong>
              <span class="segbody">/lib/udev/keymaps/force-release,
              /usr/include/gudev-1.0/gudev, /usr/lib/girepository-1.0,
              /usr/share/gir-1.0, and /usr/share/gtk-doc/html/gudev</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Short Descriptions
          </h3>
          <table border="0">
            <col align="left" valign="top" />
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="keymap-systemd" name=
                    "keymap-systemd"></a><span class="term"><span class=
                    "command"><strong>keymap</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    configures computer model specific key mappings.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libgudev-1.0-systemd" name=
                    "libgudev-1.0-systemd"></a><span class=
                    "term"><code class="filename">libgudev-1.0.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    is a GObject-based wrapper library for libudev.
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on 2014-02-19 10:11:12 +0000
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="sysstat.html" title=
          "Sysstat-10.2.1">Prev</a>
          <p>
            Sysstat-10.2.1
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="udisks.html" title="UDisks-1.0.5">Next</a>
          <p>
            UDisks-1.0.5
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="sysutils.html" title=
          "Chapter&nbsp;12.&nbsp;System Utilities">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 2014-04-20">Home</a>
        </li>
      </ul>
    </div>
  </body>
</html>
