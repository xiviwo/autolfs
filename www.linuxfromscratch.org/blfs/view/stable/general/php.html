<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "application/xhtml+xml; charset=iso-8859-1" />
    <title>
      PHP-5.6.0
    </title>
    <link rel="stylesheet" href="../stylesheets/lfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-7.6">
    <div class="navheader">
      <h4>
        Beyond Linux<sup>®</sup> From Scratch - Version 7.6
      </h4>
      <h3>
        Chapter&nbsp;13.&nbsp;Programming
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="perl-modules.html" title=
          "Perl Modules">Prev</a>
          <p>
            Perl Modules
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="python2.html" title="Python-2.7.8">Next</a>
          <p>
            Python-2.7.8
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="prog.html" title=
          "Chapter&nbsp;13.&nbsp;Programming">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 7.6">Home</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="en" xml:lang="en">
      <h1 class="sect1">
        <a id="php" name="php"></a>PHP-5.6.0
      </h1>
      <div class="package" lang="en" xml:lang="en">
        <h2 class="sect2">
          Introduction to PHP
        </h2>
        <p>
          <span class="application">PHP</span> is the PHP Hypertext
          Preprocessor. Primarily used in dynamic web sites, it allows for
          programming code to be directly embedded into the HTML markup. It
          is also useful as a general purpose scripting language.
        </p>
        <p>
          This package is known to build and work properly using an LFS-7.6
          platform.
        </p>
        <h3>
          Package Information
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li>
              <p>
                Download (HTTP): <a class="ulink" href=
                "http://us2.php.net/distributions/php-5.6.0.tar.bz2">http://us2.php.net/distributions/php-5.6.0.tar.bz2</a>
              </p>
            </li>
            <li>
              <p>
                Download (FTP): <a class="ulink" href=
                "ftp://ftp.isu.edu.tw/pub/Unix/Web/PHP/distributions/php-5.6.0.tar.bz2">
                ftp://ftp.isu.edu.tw/pub/Unix/Web/PHP/distributions/php-5.6.0.tar.bz2</a>
              </p>
            </li>
            <li>
              <p>
                Download MD5 sum: 1f889357528809a6675e2f23995832d7
              </p>
            </li>
            <li>
              <p>
                Download size: 13 MB
              </p>
            </li>
            <li>
              <p>
                Estimated disk space required: 442 MB (additional 1 MB to run
                the test suite and 102 MB for documentation)
              </p>
            </li>
            <li>
              <p>
                Estimated build time: 4 SBU (additional 1.9 SBU to run the
                test suite)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Additional Downloads
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li>
              <p>
                Pre-built documentation (optional): <a class="ulink" href=
                "http://www.php.net/download-docs.php">http://www.php.net/download-docs.php</a>
              </p>
            </li>
          </ul>
        </div>
        <h3>
          PHP Dependencies
        </h3>
        <h4>
          Recommended
        </h4>
        <p class="recommended">
          <a class="xref" href="../server/apache.html" title=
          "Apache-2.4.10">Apache-2.4.10</a> and <a class="xref" href=
          "libxml2.html" title="libxml2-2.9.1">libxml2-2.9.1</a>
        </p>
        <h4>
          Optional System Utilities and Libraries
        </h4>
        <p class="optional">
          <a class="xref" href="libxslt.html" title=
          "libxslt-1.1.28">libxslt-1.1.28</a>, <a class="xref" href=
          "pcre.html" title="PCRE-8.35">PCRE-8.35</a>, <a class="xref" href=
          "aspell.html" title="Aspell-0.60.6.1">Aspell-0.60.6.1</a>,
          <a class="xref" href="enchant.html" title=
          "enchant-1.6.0">enchant-1.6.0</a>, <a class="xref" href="pth.html"
          title="Pth-2.0.7">Pth-2.0.7</a>, an <a class="xref" href=
          "../server/mail.html" title=
          "Chapter&nbsp;21.&nbsp;Mail Server Software">MTA</a> (that provides
          a <span class="command"><strong>sendmail</strong></span> command)
          <a class="ulink" href="http://www.ossp.org/pkg/lib/mm/">OSSP
          mm</a>, <a class="ulink" href=
          "http://www.net-snmp.org/">Net-SNMP</a>, <a class="ulink" href=
          "http://re2c.org/">re2c</a>, <a class="ulink" href=
          "http://xmlrpc-epi.sourceforge.net/main.php?t=php_about">XMLRPC-EPI</a>,
          and <a class="ulink" href="http://dmalloc.com/">Dmalloc</a>
        </p>
        <h4>
          Optional Graphics Utilities and Libraries
        </h4>
        <p class="optional">
          <a class="xref" href="libjpeg.html" title=
          "libjpeg-turbo-1.3.1">libjpeg-turbo-1.3.1</a>, <a class="xref"
          href="libtiff.html" title="LibTIFF-4.0.3">LibTIFF-4.0.3</a>,
          <a class="xref" href="libpng.html" title=
          "libpng-1.6.13">libpng-1.6.13</a>, <a class="xref" href=
          "libexif.html" title="libexif-0.6.21">libexif-0.6.21</a>, <a class=
          "xref" href="freetype2.html" title=
          "FreeType-2.5.3">FreeType-2.5.3</a>, <a class="xref" href=
          "../x/installing.html" title=
          "Chapter&nbsp;24.&nbsp;X Window System Environment">X Window
          System</a>, <a class="ulink" href=
          "http://www.fastio.com/">ClibPDF</a>, <a class="ulink" href=
          "https://bitbucket.org/libgd/gd-libgd/downloads">GD</a>, <a class=
          "ulink" href=
          "http://fossies.org/linux/misc/t1lib-5.1.2.tar.gz/">t1lib</a>, and
          <a class="ulink" href=
          "http://www.adobe.com/devnet/acrobat/fdftoolkit.html">FDF
          Toolkit</a>
        </p>
        <h4>
          Optional Web Utilities
        </h4>
        <p class="optional">
          <a class="xref" href="../basicnet/curl.html" title=
          "cURL-7.37.1">cURL-7.37.1</a>, <a class="xref" href="tidy.html"
          title="HTML Tidy-cvs_20101110">HTML Tidy-cvs_20101110</a>,
          <a class="ulink" href=
          "http://www.mnogosearch.org/">mnoGoSearch</a>, <a class="ulink"
          href="http://www.hyperwave.com/">Hyperwave</a>, <a class="ulink"
          href="http://www.roxen.com/products/webserver/">Roxen
          WebServer</a>, <a class="ulink" href=
          "http://sourceforge.net/projects/caudium/">Caudium</a>, and
          <a class="ulink" href="https://wddxnet.codeplex.com/">WDDX</a>
        </p>
        <h4>
          Optional Data Management Utilities and Libraries
        </h4>
        <p class="optional">
          <a class="xref" href="../server/openldap.html" title=
          "OpenLDAP-2.4.39">OpenLDAP-2.4.39</a>, <a class="xref" href=
          "../server/db.html" title="Berkeley DB-6.1.19">Berkeley
          DB-6.1.19</a>, <a class="xref" href="../server/mariadb.html" title=
          "MariaDB-10.0.13">MariaDB-10.0.13</a> or <a class="ulink" href=
          "http://www.mysql.com/">MySQL</a>, <a class="xref" href=
          "../server/postgresql.html" title=
          "PostgreSQL-9.3.5">PostgreSQL-9.3.5</a>, <a class="xref" href=
          "unixodbc.html" title="unixODBC-2.3.2">unixODBC-2.3.2</a>,
          <a class="xref" href="../server/sqlite.html" title=
          "SQLite-3.8.6">SQLite-3.8.6</a>, <a class="ulink" href=
          "http://sourceforge.net/projects/qdbm">QDBM</a>, <a class="ulink"
          href="http://cr.yp.to/cdb.html">cdb</a>, <a class="ulink" href=
          "http://www.hughes.com.au/products/msql/">Mini SQL</a>, <a class=
          "ulink" href="http://www.empress.com/">Empress</a>, <a class=
          "ulink" href="http://www.birdstep.com/">Birdstep</a>, <a class=
          "ulink" href="http://www.dbmaker.com/">DBMaker</a>, <a class=
          "ulink" href="http://www.softwareag.com/">Adabas</a>, <a class=
          "ulink" href="http://www.frontbase.com/">FrontBase</a>, and
          <a class="ulink" href=
          "http://www.mainstreetsoftworks.com/">Monetra</a>
        </p>
        <p>
          <span class="application">PHP</span> also provides support for many
          commercial database tools such as <span class=
          "application">Oracle</span>, <span class="application">SAP</span>
          and <span class="application">ODBC Router</span>.
        </p>
        <h4>
          Optional Security/Encryption Utilities and Libraries
        </h4>
        <p class="optional">
          <a class="xref" href="../postlfs/openssl.html" title=
          "OpenSSL-1.0.1i">OpenSSL-1.0.1i</a>, <a class="xref" href=
          "../postlfs/cyrus-sasl.html" title="Cyrus SASL-2.1.26">Cyrus
          SASL-2.1.26</a>, <a class="xref" href="../postlfs/mitkrb.html"
          title="MIT Kerberos V5-1.12.2">MIT Kerberos V5-1.12.2</a>,
          <a class="ulink" href=
          "http://mcrypt.sourceforge.net/">libmcrypt</a>, and <a class=
          "ulink" href="http://mhash.sourceforge.net/">mhash</a>
        </p>
        <p class="usernotes">
          User Notes: <a class="ulink" href=
          "http://wiki.linuxfromscratch.org/blfs/wiki/php">http://wiki.linuxfromscratch.org/blfs/wiki/php</a>
        </p>
      </div>
      <div class="installation" lang="en" xml:lang="en">
        <h2 class="sect2">
          Installation of PHP
        </h2>
        <p>
          You can use <span class="application">PHP</span> for server-side
          scripting, command-line scripting or client-side GUI applications.
          This book provides instructions for setting up <span class=
          "application">PHP</span> for server-side scripting as it is the
          most common form.
        </p>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            <span class="application">PHP</span> has many more <span class=
            "command"><strong>configure</strong></span> options that will
            enable support for various things. You can use <span class=
            "command"><strong>./configure --help</strong></span> to see a
            full list of the available options. Also, use of the <a class=
            "ulink" href="http://www.php.net/">PHP web site</a> is highly
            recommended, as their online docs are very good. An example of a
            <span class="command"><strong>configure</strong></span> command
            that utilizes many of the most common dependencies can be found
            at <a class="ulink" href=
            "http://anduin.linuxfromscratch.org/files/BLFS/svn/php_configure.txt">
            http://anduin.linuxfromscratch.org/files/BLFS/svn/php_configure.txt</a>.
          </p>
          <p>
            If, for whatever reason, you don't have <a class="xref" href=
            "libxml2.html" title="libxml2-2.9.1">libxml2-2.9.1</a> installed,
            you need to add <code class="option">--disable-libxml</code> to
            the <span class="command"><strong>configure</strong></span>
            command in the instructions below. Note that this will prevent
            the <span class="command"><strong>pear</strong></span> command
            from being built.
          </p>
        </div>
        <p>
          Install <span class="application">PHP</span> by running the
          following commands:
        </p>
        <pre class="userinput">
<kbd class="command">./configure --prefix=/usr                \
            --sysconfdir=/etc            \
            --localstatedir=/var         \
            --datadir=/usr/share/php     \
            --mandir=/usr/share/man      \
            --enable-fpm                 \
            --with-fpm-user=apache       \
            --with-fpm-group=apache      \
            --with-config-file-path=/etc \
            --with-zlib                  \
            --enable-bcmath              \
            --with-bz2                   \
            --enable-calendar            \
            --enable-dba=shared          \
            --with-gdbm                  \
            --with-gmp                   \
            --enable-ftp                 \
            --with-gettext               \
            --enable-mbstring            \
            --with-readline              &amp;&amp;
make</kbd>
</pre>
        <p>
          To test the results, issue: <span class="command"><strong>make
          test</strong></span>. A few tests may fail, in which case you are
          asked whether you want to send the report to the PHP developpers.
          If you want to automate the test, you may prefix the command with
          <span class="command"><strong>yes "n" |</strong></span> .
        </p>
        <p>
          Now, as the <code class="systemitem">root</code> user:
        </p>
        <pre class="root">
<kbd class=
"command">make install                                         &amp;&amp;
install -v -m644 php.ini-production /etc/php.ini     &amp;&amp;
mv -v /etc/php-fpm.conf{.default,}                   &amp;&amp;

install -v -m755 -d /usr/share/doc/php-5.6.0 &amp;&amp;
install -v -m644    CODING_STANDARDS EXTENSIONS INSTALL NEWS README* UPGRADING* php.gif \
                    /usr/share/doc/php-5.6.0 &amp;&amp;
ln -v -sfn          /usr/lib/php/doc/Archive_Tar/docs/Archive_Tar.txt \
                    /usr/share/doc/php-5.6.0 &amp;&amp;
ln -v -sfn          /usr/lib/php/doc/Structures_Graph/docs \
                    /usr/share/doc/php-5.6.0</kbd>
</pre>
        <p>
          The pre-built HTML documentation is packaged in two forms: a
          tarball containing many individual files, useful for quick loading
          into your browser, and one large individual file, which is useful
          for using the search utility of your browser. If you downloaded
          either, or both, of the documentation files, issue the following
          commands as the <code class="systemitem">root</code> user to
          install them (note these instructions assume English docs, modify
          the tarball names below if necessary).
        </p>
        <p>
          For the &ldquo;<span class="quote">Single HTML</span>&rdquo; file:
        </p>
        <pre class="root">
<kbd class="command">install -v -m644 ../php_manual_en.html.gz \
    /usr/share/doc/php-5.6.0 &amp;&amp;
gunzip -v /usr/share/doc/php-5.6.0/php_manual_en.html.gz</kbd>
</pre>
        <p>
          For the &ldquo;<span class="quote">Many HTML files</span>&rdquo;
          tarball:
        </p>
        <pre class="root">
<kbd class="command">tar -xvf ../php_manual_en.tar.gz \
    -C /usr/share/doc/php-5.6.0 --no-same-owner</kbd>
</pre>
      </div>
      <div class="commands" lang="en" xml:lang="en">
        <h2 class="sect2">
          Command Explanations
        </h2>
        <p>
          <em class=
          "parameter"><code>--with-datadir=/usr/share/php</code></em>: This
          works around a bug in the build machinery, which installs some data
          to a wrong location.
        </p>
        <p>
          <em class="parameter"><code>--enable-fpm</code></em>: This
          parameter allows building the fastCGI Process Manager.
        </p>
        <p>
          <em class=
          "parameter"><code>--with-config-file-path=/etc</code></em>: This
          parameter makes <span class="application">PHP</span> look for the
          <code class="filename">php.ini</code> configuration file in
          <code class="filename">/etc</code>.
        </p>
        <p>
          <em class="parameter"><code>--with-zlib</code></em>: This parameter
          adds support for <span class="application">Zlib</span> compression.
        </p>
        <p>
          <em class="parameter"><code>--enable-bcmath</code></em>: Enables
          <span class="command"><strong>bc</strong></span> style precision
          math functions.
        </p>
        <p>
          <em class="parameter"><code>--with-bz2</code></em>: Adds support
          for <span class="application">Bzip2</span> compression functions.
        </p>
        <p>
          <em class="parameter"><code>--enable-calendar</code></em>: This
          parameter provides support for calendar conversion.
        </p>
        <p>
          <em class="parameter"><code>--enable-dba=shared</code></em>: This
          parameter enables support for database (dbm-style) abstraction
          layer functions.
        </p>
        <p>
          <em class="parameter"><code>--enable-ftp</code></em>: This
          parameter enables FTP functions.
        </p>
        <p>
          <em class="parameter"><code>--with-gettext</code></em>: Enables
          functions that use <span class="application">Gettext</span> text
          translation.
        </p>
        <p>
          <em class="parameter"><code>--enable-mbstring</code></em>: This
          parameter enables multibyte string support.
        </p>
        <p>
          <em class="parameter"><code>--with-readline</code></em>: This
          parameter enables command line <span class=
          "application">Readline</span> support.
        </p>
        <p>
          <code class="option">--with-mysql</code>: This option includes
          <span class="application">MariaDB/MySQL</span> support.
        </p>
        <p>
          <code class="option">--disable-libxml</code>: This option allows
          building PHP without <span class="application">libxml2</span>
          installed.
        </p>
        <p>
          <code class="option">--with-apxs2</code>: Instead of building the
          fastCGI process manager, it is possible to build an <span class=
          "application">apache</span> module. This has some performance
          penalty for heavy loaded servers, but may be easier to set up. This
          switch is incompatible with the <em class=
          "parameter"><code>--enable-fpm</code></em> and <em class=
          "parameter"><code>--with-fpm-...</code></em> switches.
        </p>
      </div>
      <div class="configuration" lang="en" xml:lang="en">
        <h2 class="sect2">
          Configuring PHP
        </h2>
        <div class="sect3" lang="en" xml:lang="en">
          <h3 class="sect3">
            <a id="php-config" name="php-config"></a>Config Files
          </h3>
          <p>
            <code class="filename">/etc/php.ini</code>, <code class=
            "filename">/etc/pear.conf</code> and <code class=
            "filename">/etc/php-fpm.conf</code>
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <h3 class="sect3">
            Configuration Information
          </h3>
          <p>
            The file used as the default <code class=
            "filename">/etc/php.ini</code> configuration file is recommended
            by the <span class="application">PHP</span> development team.
            This file modifies the default behavior of <span class=
            "application">PHP</span>. If no <code class=
            "filename">/etc/php.ini</code> is used, all configuration
            settings fall to the defaults. You should review the comments in
            this file and ensure the changes are acceptable in your
            particular environment.
          </p>
          <p>
            You may have noticed the following from the output of the
            <span class="command"><strong>make install</strong></span>
            command:
          </p>
          <pre class="screen">
<code class=
"computeroutput">You may want to add: /usr/lib/php to your php.ini include_path</code>
</pre>
          <p>
            If desired, add the entry using the following command as the
            <code class="systemitem">root</code> user:
          </p>
          <pre class="root">
<kbd class=
"command">sed -i 's@php/includes"@&amp;\ninclude_path = ".:/usr/lib/php"@' \
    /etc/php.ini</kbd>
</pre>
          <p>
            To enable fastCGI support in the <span class=
            "application">Apache</span> web server, two LoadModule directives
            must be added to the <code class="filename">httpd.conf</code>
            file. They are commented out, so just issue the following command
            as <code class="systemitem">root</code> user:
          </p>
          <pre class="root">
<kbd class="command">sed -i -e '/proxy_module/s/^#//'      \
       -e '/proxy_fcgi_module/s/^#//' \
       /etc/httpd/httpd.conf</kbd>
</pre>
          <p>
            Those modules accept various <span class=
            "command"><strong>ProxyPass</strong></span> directives. One
            possibility is (as the <code class="systemitem">root</code>
            user):
          </p>
          <pre class="root">
<kbd class="command">echo \
'ProxyPassMatch ^/(.*\.php)$ fcgi://127.0.0.1:9000/srv/www/$1' &gt;&gt; \
/etc/httpd/httpd.conf</kbd>
</pre>
          <p>
            Additionally, it may be useful to add an entry for <code class=
            "filename">index.php</code> to the DirectoryIndex directive of
            the <code class="filename">httpd.conf</code> file. Lastly, adding
            a line to setup the <code class="filename">.phps</code> extension
            to show highlighted <span class="application">PHP</span> source
            may be desirable:
          </p>
          <pre class="screen">
<code class="literal">AddType application/x-httpd-php-source .phps</code>
</pre>
          <p>
            You'll need to restart the <span class=
            "application">Apache</span> web server after making any
            modifications to the <code class="filename">httpd.conf</code>
            file.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <h3 class="sect3">
            <a id="php-init" name="php-init"></a>Boot Script
          </h3>
          <p>
            To automatically start the <span class=
            "command"><strong>php-fpm</strong></span> daemon when the system
            is rebooted, install the <code class=
            "filename">/etc/rc.d/init.d/php</code> bootscript from the
            <a class="xref" href="../introduction/bootscripts.html" title=
            "BLFS Boot Scripts">blfs-bootscripts-20140919</a> package as the
            <code class="systemitem">root</code> user:
          </p>
          <pre class="root">
<kbd class="command">make install-php</kbd>
</pre>
        </div>
      </div>
      <div class="content" lang="en" xml:lang="en">
        <h2 class="sect2">
          Contents
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Installed Programs:</strong>
              <span class="segbody">pear, peardev, pecl, phar (symlink),
              phar.phar, php, php-cgi, php-config, php-fpm, and phpize</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Libraries:</strong>
              <span class="segbody">dba.{so,a} and opcache.{so,a} in
              /usr/lib/php/extensions/no-debug-non-zts-20121212/</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Directories:</strong>
              <span class="segbody">/usr/include/php, /usr/lib/php,
              /usr/share/php and /usr/share/doc/php-5.6.0</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Short Descriptions
          </h3>
          <table border="0">
            <col align="left" valign="top" />
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="php-prog" name="php-prog"></a><span class=
                    "term"><span class=
                    "command"><strong>php</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is a command line interface that enables you to parse and
                    execute PHP code.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="pear" name="pear"></a><span class=
                    "term"><span class=
                    "command"><strong>pear</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is the PHP Extension and Application Repository (PEAR)
                    package manager.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="php-fpm" name="php-fpm"></a><span class=
                    "term"><span class=
                    "command"><strong>php-fpm</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is the fastCGI process manager for PHP.
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on 2014-09-21 01:03:52 -0700
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="perl-modules.html" title=
          "Perl Modules">Prev</a>
          <p>
            Perl Modules
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="python2.html" title="Python-2.7.8">Next</a>
          <p>
            Python-2.7.8
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="prog.html" title=
          "Chapter&nbsp;13.&nbsp;Programming">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 7.6">Home</a>
        </li>
      </ul>
    </div>
  </body>
</html>
